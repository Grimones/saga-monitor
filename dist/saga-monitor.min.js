/**
 * Copyright (c) 2018, Travis Clarke
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.SagaMonitor={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){a(e,t,n[t])})}return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function d(e){return y(e)||p(e)||h()}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function p(e){
if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(e,t){void 0===t&&(t=!0);var n,o=new Promise(function(o){n=setTimeout(o,e,t)});return o[_]=function(){clearTimeout(n)},o}function v(e,t,n){if(!t(e))throw Error(n)}function E(e,t){var n,o=null;return F(e)?n=e:(H(e)?(o=e[0],n=e[1]):(o=e.context,n=e.fn),o&&K(n)&&F(o[n])&&(n=o[n])),{context:o,fn:n,args:t}}function b(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return"production"!==process.env.NODE_ENV&&(v(e,ne,"instead of writing `yield call(delay, "+n[0]+")` where delay is an effect from `redux-saga/effects` you should write `yield delay("+n[0]+")`"),te("call",e)),ee(Y,E(e,n))}function m(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(console.group){var o;(o=console).group.apply(o,t)}else{var r;console.log(""),(r=console).log.apply(r,[ae+fe].concat(t)),ae+=ce}}function S(){console.groupEnd?console.groupEnd():ae=ae.substr(0,ae.length-ce.length)}function C(e){return"function"==typeof e?"".concat(e.name):"string"==typeof e?"'".concat(e,"'"):e}function T(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"===t(e)||null===e||void 0===e}function O(e){0===e.getRootIds().length&&console.log("Saga monitor: No effects to log"),console.log(""),console.log("Saga monitor:",Date.now(),(new Date).toISOString());var t=!0,n=!1,o=void 0;try{for(var r,a=e.getRootIds()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){w(e,r.value)}}catch(e){n=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}console.log("")}function w(e,t){var n=e.get(t),o=e.getChildIds(t),r=R(n);if(0===o.length){var a;(a=console)[r.logMethod].apply(a,d(r.getLog()))}else{m.apply(void 0,d(r.getLog()));var c=!0,f=!1,i=void 0;try{for(var l,s=o[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){w(e,l.value)}}catch(e){f=!0,i=e}finally{try{c||null==s.return||s.return()
}finally{if(f)throw i}}S()}}function R(e){var t=e.status===Q,n=e.status===B,o=new ue(t,n);if(o.addLabel(e.winner?n?"✘":"✓":"").addLabel(e.label),e.root)o.addEffectType("root").resetStyle().addCall(e.saga.name,e.args).addDescResult(e);else if(G(e.effect))o.addValue(e.effect.name).addDescResult(e,!0);else if(X(e.effect))o.addEffectType("promise").resetStyle().addDescResult(e);else if($(e.effect)){var r=e.effect,a=r.type,c=r.payload;if(a===Z.TAKE)o.addEffectType("take").resetStyle().addValue(null==c.channel?c.pattern:c).addDescResult(e);else if(a===Z.PUT)o.addEffectType("put").resetStyle().addDescResult(Object.assign({},e,{result:c}));else if(a===Z.ALL)o.addEffectType("all").resetStyle().addDescResult(e,!0);else if(a===Z.RACE)o.addEffectType("race").resetStyle().addDescResult(e,!0);else if(a===Z.CALL)o.addEffectType("call").resetStyle().addCall(c.fn.name,c.args).addDescResult(e);else if(a===Z.CPS)o.addEffectType("cps").resetStyle().addCall(c.fn.name,c.args).addDescResult(e);else if(a===Z.FORK)o.addEffectType(c.detached?"spawn":"fork").resetStyle().addCall(c.fn.name,c.args).addDescResult(e);else if(a===Z.JOIN)o.addEffectType("join").resetStyle().addDescResult(e);else if(a===Z.CANCEL)o.addEffectType("cancel").resetStyle().appendData(c.name);else if(a===Z.SELECT)o.addEffectType("select").resetStyle().addCall(c.selector.name,c.args).addDescResult(e);else if(a===Z.ACTION_CHANNEL)o.addEffectType("actionChannel").resetStyle().addValue(null==c.buffer?c.pattern:c).addDescResult(e);else if(a===Z.CANCELLED)o.addEffectType("cancelled").resetStyle().addDescResult(e);else if(a===Z.FLUSH)o.addEffectType("flush").resetStyle().addValue(c).addDescResult(e);else if(a===Z.GET_CONTEXT)o.addEffectType("getContext").resetStyle().addValue(c).addDescResult(e);else{if(a!==Z.SET_CONTEXT)throw Error("Invalid effect type ".concat(a));o.addEffectType("setContext").resetStyle().addValue(c).addDescResult(e,!0)}}else o.addEffectType("unknown").resetStyle().addDescResult(e);return o}function D(){
return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()}function L(e){var t=D();Object.assign(e,{end:t,duration:t-e.start})}function A(e,t){var n=pe.get(e);J(t)?t.toPromise().then(function(n){t.isCancelled()?N(e):A(e,n)},function(t){return j(e,t)}):(L(n),n.status=z,n.result=t,re(n.effect)&&I(e,t))}function j(e,t){var n=pe.get(e);L(n),n.status=B,n.error=t,re(n.effect)&&I(e,t)}function N(e){var t=pe.get(e);L(t),t.status=Q}function I(e,t){var n=Object.keys(t)[0],o=!0,r=!1,a=void 0;try{for(var c,f=pe.getChildIds(e)[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var i=c.value,l=pe.get(i);l.label===n&&(l.winner=!0)}}catch(e){r=!0,a=e}finally{try{o||null==f.return||f.return()}finally{if(r)throw a}}}function x(){function e(e){d&&console[l]("%c Root saga started:",e.saga.name||"anonymous",E,e.args),pe.setRootEffect(e.effectId,Object.assign({},e,{status:q,start:D()}))}function t(e){y&&console[l]("%c effectTriggered:",E,e),pe.set(e.effectId,Object.assign({},e,{status:q,start:D()}))}function n(e,t){p&&console[l]("%c effectResolved:",E,e,t),A(e,t)}function o(e,t){h&&console[l]("%c effectRejected:",E,e,t),j(e,t)}function r(e){g&&console[l]("%c effectCancelled:",E,e),N(e)}function a(e){v&&console[l]("%c actionDispatched:",E,e)}var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c({},he,f),l=i.level,s=i.verbose,u=i.color,d=i.rootSagaStart,y=i.effectTrigger,p=i.effectResolve,h=i.effectReject,g=i.effectCancel,v=i.actionDispatch,E=["color: ".concat(u),"font-weight: bold"].join(";");return s&&console[l]("View Sagas by executing %c $$LogSagas()",E,"in the console"),{rootSagaStarted:e,effectTriggered:t,effectResolved:n,effectRejected:o,effectCancelled:r,actionDispatched:a}}var k=function(e){return"@@redux-saga/"+e},_=k("CANCEL_PROMISE"),P=k("IO"),V=k("TASK"),M=function(e){return null!==e&&void 0!==e},F=function(e){return"function"==typeof e},K=function(e){return"string"==typeof e},H=Array.isArray,U=function(e){return e&&!H(e)&&"object"==typeof e},X=function(e){return e&&F(e.then)
},G=function(e){return e&&F(e.next)&&F(e.throw)},J=function(e){return e&&e[V]},$=function(e){return e&&e[P]},q="PENDING",z="RESOLVED",B="REJECTED",Q="CANCELLED",W="undefined"!=typeof window&&window.document,Y="CALL",Z=Object.freeze({TAKE:"TAKE",PUT:"PUT",ALL:"ALL",RACE:"RACE",CALL:Y,CPS:"CPS",FORK:"FORK",JOIN:"JOIN",CANCEL:"CANCEL",SELECT:"SELECT",ACTION_CHANNEL:"ACTION_CHANNEL",CANCELLED:"CANCELLED",FLUSH:"FLUSH",GET_CONTEXT:"GET_CONTEXT",SET_CONTEXT:"SET_CONTEXT"}),ee=function(e,t){var n;return n={},n[P]=!0,n.combinator=!1,n.type=e,n.payload=t,n},te=function(e,t){if(v(t,M,e+": argument fn is undefined or null"),!F(t)){var n,o=null;if(H(t))o=t[0],n=t[1],v(n,M,e+": argument of type [context, fn] has undefined or null `fn`");else{if(!U(t))return void v(t,F,e+": argument fn is not function");o=t.context,n=t.fn,v(n,M,e+": argument of type {context, fn} has undefined or null `fn`")}if(o&&K(n))return void v(o[n],F,e+': context arguments has no such method - "'+n+'"');v(n,F,e+": unpacked fn argument (from [context, fn] or {context, fn}) is not a function")}},ne=function(e){return e!==oe},oe=b.bind(null,g),re=function(e){return $(e)&&e.type===Z.RACE},ae="",ce="   ",fe="▼",ie=function(){function e(){n(this,e),this.logs=[],this.suffix=[]}return r(e,[{key:"add",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!W&&"string"==typeof e){var r=e;e=e.replace(/^%c\s*/,""),e!==r&&n.shift()}return this.logs.push({msg:e,args:n}),this}},{key:"appendData",value:function(){var e;return(e=this.suffix).push.apply(e,arguments),this}},{key:"addValue",value:function(e){return T(e)?this.add(e):W?this.add("%O",e):this.add("%s",require("util").inspect(e)),this}},{key:"addCall",value:function(e,t){var n=this;return t.length?(this.add(e),this.add("("),t.forEach(function(e,o){n.addValue(C(e)),n.addValue(o===t.length-1?")":", ")})):this.add("".concat(e,"()")),this}},{key:"getLog",value:function(){var e=[],t=[],n=!0,o=!1,r=void 0;try{
for(var a,c=this.logs[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var f=a.value,i=f.msg,l=f.args;e.push(i),t.push.apply(t,d(l))}}catch(e){o=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return[e.join("")].concat(t,d(this.suffix))}}]),e}(),le="color: red",se="color: #ccc",ue=function(e){function t(e,o){var r;return n(this,t),r=u(this,i(t).call(this)),r.logMethod=o?"error":"log",r.styleOverride=function(t){return e?se:o?le:t},r}return f(t,e),r(t,[{key:"resetStyle",value:function(){return this.add("%c",this.styleOverride("color: black"))}},{key:"addLabel",value:function(e){return e?this.add("%c ".concat(e," "),this.styleOverride("font-weight: bold")):this}},{key:"addEffectType",value:function(e){return this.add("%c ".concat(e," "),this.styleOverride("color: blue"))}},{key:"addDescResult",value:function(e,t){var n=e.status,o=e.result,r=e.error,a=e.duration;return n!==z||t?n===B?this.appendData("🡲 ⚠",r):n===q?this.appendData("⌛"):n===Q&&this.appendData("🡲 Cancelled!"):H(o)?(this.addValue(" 🡲 "),this.addValue(o)):this.appendData("🡲",o),n!==q&&this.appendData("(".concat(a.toFixed(2),"ms)")),this}}]),t}(ie),de=function(){function e(){n(this,e),this.rootIds=[],this.map={},this.childIdsMap={}}return r(e,[{key:"get",value:function(e){return this.map[e]}},{key:"set",value:function(e,t){this.map[e]=t,null==this.childIdsMap[t.parentEffectId]&&(this.childIdsMap[t.parentEffectId]=[]),this.childIdsMap[t.parentEffectId].push(e)}},{key:"setRootEffect",value:function(e,t){this.rootIds.push(e),this.set(e,Object.assign({root:!0},t))}},{key:"getRootIds",value:function(){return this.rootIds}},{key:"getChildIds",value:function(e){return this.childIdsMap[e]||[]}}]),e}(),ye=void 0===window.document&&"ReactNative"===navigator.product?global:W?window:null,pe=new de,he={level:"debug",color:"#03A9F4",rootSagaStart:!1,effectTrigger:!1,effectResolve:!1,effectReject:!1,effectCancel:!1,actionDispatch:!1};ye&&(ye.$$LogSagas=function(){return O(pe)}),e.logSaga=O,e.default=x,Object.defineProperty(e,"__esModule",{
value:!0})});