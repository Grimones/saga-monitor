/**
 * Copyright (c) 2018, Travis Clarke
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Sagamonitor={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return o(e)||r(e)||c()}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e,t){return R.notUndef(e)&&k.call(e,t)}function f(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()}function u(){function e(e){g&&console[u]("%c effectTriggered   ",h,e),M[e.effectId]=Object.assign({},e,{status:V,start:f()}),e.root&&z.push(e.effectId)}function t(e,t){y&&console[u]("%c effectResolved    ",h,e,t),i(e,t)}function n(e,t){m&&console[u]("%c effectRejected    ",h,e,t),s(e,t)}function o(e){b&&console[u]("%c effectCancelled   ",h,e),d(e)}function r(e){v&&console[u]("%c actionDispatched  ",h,e)}var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object.assign({},q,c),u=a.level,l=a.verbose,p=a.color,g=a.effectTrigger,y=a.effectResolve,m=a.effectReject,b=a.effectCancel,v=a.actionDispatch,h=["color: ".concat(p),"font-weight: bold"].join(";");return l&&console[u]("View Sagas by executing %c $$LogSagas()",h,"in the console"),{effectTriggered:e,effectResolved:t,effectRejected:n,effectCancelled:o,actionDispatched:r}}function l(e){var t=f();Object.assign(e,{end:t,duration:t-e.start})}function i(e,t){var n=M[e];R.task(t)?t.done.then(function(n){t.isCancelled()?d(e):i(e,n)},function(t){return s(e,t)}):(l(n),n.status=P,n.result=t,n&&I.race(n.effect)&&p(e,t))}function s(e,t){var n=M[e];l(n),n.status=F,
n.error=t,n&&I.race(n.effect)&&p(e,t)}function d(e){var t=M[e];l(t),t.status=_}function p(e,t){for(var n=Object.keys(t)[0],o=g(e),r=0;r<o.length;r++){var c=M[o[r]];c.label===n&&(c.winner=!0)}}function g(e){return Object.keys(M).filter(function(t){return M[t].parentEffectId===e}).map(function(e){return+e})}function y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(console.group){var o;(o=console).group.apply(o,t)}else{var r;console.log(""),(r=console).log.apply(r,[B+W].concat(t)),B+=Q}}function m(){console.groupEnd?console.groupEnd():B=B.substr(0,B.length-Q.length)}function b(e){e.forEach(v)}function v(e){var t=M[e],o=g(e);if(o.length){y.apply(void 0,n(C(t).formatter.getLog())),o.forEach(v),m()}else h(t)}function h(e){var t,o=C(e),r=o.method,c=o.formatter;(t=console)[r].apply(t,n(c.getLog()))}function C(e){var t,n;return e.root?(t=e.effect,n=E("run",e),n.formatter.addCall(t.saga.name,t.args),w(e,n.formatter)):(t=I.take(e.effect))?(n=E("take",e),n.formatter.addValue(t),w(e,n.formatter)):(t=I.put(e.effect))?(n=E("put",e),w(Object.assign({},e,{result:t}),n.formatter)):(t=I.call(e.effect))?(n=E("call",e),n.formatter.addCall(t.fn.name,t.args),w(e,n.formatter)):(t=I.cps(e.effect))?(n=E("cps",e),n.formatter.addCall(t.fn.name,t.args),w(e,n.formatter)):(t=I.fork(e.effect))?(n=t.detached?E("spawn",e):E("fork",e),n.formatter.addCall(t.fn.name,t.args),w(e,n.formatter)):(t=I.join(e.effect))?(n=E("join",e),w(e,n.formatter)):(t=I.race(e.effect))?(n=E("race",e),w(e,n.formatter,!0)):(t=I.cancel(e.effect))?(n=E("cancel",e),n.formatter.appendData(t.name)):(t=I.select(e.effect))?(n=E("select",e),n.formatter.addCall(t.selector.name,t.args),w(e,n.formatter)):R.array(e.effect)?(n=E("parallel",e),w(e,n.formatter,!0)):R.iterator(e.effect)?(n=E("",e),n.formatter.addValue(e.effect.name),w(e,n.formatter,!0)):(n=E("unkown",e),w(e,n.formatter)),n}function E(e,t){var n=t.status===_,o=t.status===F,r=o?"error":"log",c=t&&t.winner?o?"✘":"✓":"",a=function(e){return n?G:o?K:e},f=A();return c&&f.add("%c ".concat(c),a($)),
t&&t.label&&f.add("%c ".concat(t.label,": "),a($)),e&&f.add("%c ".concat(e," "),a(H)),f.add("%c",a(U)),{method:r,formatter:f}}function S(e){return"function"==typeof e?"".concat(e.name):"string"==typeof e?"'".concat(e,"'"):e}function w(e,t,n){var o=e.status,r=e.result,c=e.error,a=e.duration;o!==P||n?o===F?t.appendData("→ ⚠",c):o===V?t.appendData("⌛"):o===_&&t.appendData("→ Cancelled!"):R.array(r)?(t.addValue(" → "),t.addValue(r)):t.appendData("→",r),o!==V&&t.appendData("(".concat(a.toFixed(2),"ms)"))}function j(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"===t(e)||null===e||void 0===e}function A(){function e(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!J&&"string"==typeof e){var r=e;e=e.replace(/^%c\s*/,""),e!==r&&n.shift()}c.push({msg:e,args:n})}function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a=a.concat(t)}function n(t){j(t)?e(t):J?e("%O",t):e("%s",require("util").inspect(t))}function o(t,o){o.length?(e(t),e("("),o.forEach(function(e,t){n(S(e)),n(t===o.length-1?")":", ")})):e("".concat(t,"()"))}function r(){for(var e=[],t=[],n=0;n<c.length;n++)e.push(c[n].msg),t=t.concat(c[n].args);return[e.join("")].concat(t).concat(a)}var c=[],a=[];return{add:e,addValue:n,addCall:o,appendData:t,getLog:r}}var O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=function(e){return"@@redux-saga/"+e},L=D("TASK"),T=D("HELPER"),k=Object.prototype.hasOwnProperty,R={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!R.array(e)&&"object"===(void 0===e?"undefined":O(e))},promise:function(e){return e&&R.func(e.then)},iterator:function(e){
return e&&R.func(e.next)&&R.func(e.throw)},iterable:function(e){return e&&R.func(Symbol)?R.func(e[Symbol.iterator]):R.array(e)},task:function(e){return e&&e[L]},observable:function(e){return e&&R.func(e.subscribe)},buffer:function(e){return e&&R.func(e.isEmpty)&&R.func(e.take)&&R.func(e.put)},pattern:function(e){return e&&(R.string(e)||"symbol"===(void 0===e?"undefined":O(e))||R.func(e)||R.array(e))},channel:function(e){return e&&R.func(e.take)&&R.func(e.close)},helper:function(e){return e&&e[T]},stringableFunc:function(e){return R.func(e)&&a(e,"toString")}},N=D("IO"),x=function(e){return function(t){return t&&t[N]&&t[e]}},I={take:x("TAKE"),put:x("PUT"),all:x("ALL"),race:x("RACE"),call:x("CALL"),cps:x("CPS"),fork:x("FORK"),join:x("JOIN"),cancel:x("CANCEL"),select:x("SELECT"),actionChannel:x("ACTION_CHANNEL"),cancelled:x("CANCELLED"),flush:x("FLUSH"),getContext:x("GET_CONTEXT"),setContext:x("SET_CONTEXT")};process;var V="PENDING",P="RESOLVED",F="REJECTED",_="CANCELLED",U="color: darkgrey",$="font-weight: bold",H="color: lightblue",K="color: red",G="color: #ccc",J="undefined"!=typeof window&&window.document,X=void 0===window.document&&"ReactNative"===navigator.product?global:J?window:null,q={level:"debug",verbose:!0,color:"#03A9F4",effectTrigger:!1,effectResolve:!1,effectReject:!1,effectCancel:!1,actionDispatch:!1},M={},z=[],B="",Q="   ",W="▼",Y=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.length||(t=z),z.length||console.log(B,"No effects to log"),console.log(""),console.log("Saga monitor:",Date.now(),(new Date).toISOString()),b(t),console.log("")};X&&(X.$$LogSagas=Y),e.logSaga=Y,e.default=u,Object.defineProperty(e,"__esModule",{value:!0})});