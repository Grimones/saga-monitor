/**
 * Copyright (c) 2018, Travis Clarke
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.SagaMonitor={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(e):t}function d(e){return y(e)||p(e)||h()}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function p(e){
if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(e,t){void 0===t&&(t=!0);var n,r=new Promise(function(r){n=setTimeout(r,e,t)});return r[_]=function(){clearTimeout(n)},r}function v(e,t,n){if(!t(e))throw Error(n)}function E(e,t){var n,r=null;return F(e)?n=e:(H(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&K(n)&&F(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function b(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"production"!==process.env.NODE_ENV&&(v(e,ne,"instead of writing `yield call(delay, "+n[0]+")` where delay is an effect from `redux-saga/effects` you should write `yield delay("+n[0]+")`"),te("call",e)),ee(Y,E(e,n))}function m(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(console.group){var r;(r=console).group.apply(r,t)}else{var o;console.log(""),(o=console).log.apply(o,[ae+fe].concat(t)),ae+=ce}}function C(){console.groupEnd?console.groupEnd():ae=ae.substr(0,ae.length-ce.length)}function T(e){return"function"==typeof e?"".concat(e.name):"string"==typeof e?"'".concat(e,"'"):e}function S(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"===t(e)||null===e||void 0===e}function O(e){0===e.getRootIds().length&&console.log("Saga monitor: No effects to log"),console.log(""),console.log("Saga monitor:",Date.now(),(new Date).toISOString());var t=!0,n=!1,r=void 0;try{for(var o,a=e.getRootIds()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){w(e,o.value)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}console.log("")}function w(e,t){var n=e.get(t),r=e.getChildIds(t),o=R(n);if(0===r.length){var a;(a=console)[o.logMethod].apply(a,d(o.getLog()))}else{m.apply(void 0,d(o.getLog()));var c=!0,f=!1,l=void 0;try{for(var i,u=r[Symbol.iterator]();!(c=(i=u.next()).done);c=!0){w(e,i.value)}}catch(e){f=!0,l=e}finally{try{c||null==u.return||u.return()
}finally{if(f)throw l}}C()}}function R(e){var t=e.status===Q,n=e.status===B,r=new se(t,n);if(r.addLabel(e.winner?n?"✘":"✓":"").addLabel(e.label),e.root)r.addEffectType("root").resetStyle().addCall(e.saga.name,e.args).addDescResult(e);else if(G(e.effect))r.addValue(e.effect.name).addDescResult(e,!0);else if(X(e.effect))r.addEffectType("promise").resetStyle().addDescResult(e);else if($(e.effect)){var o=e.effect,a=o.type,c=o.payload;if(a===Z.TAKE)r.addEffectType("take").resetStyle().addValue(null==c.channel?c.pattern:c).addDescResult(e);else if(a===Z.PUT)r.addEffectType("put").resetStyle().addDescResult(Object.assign({},e,{result:c}));else if(a===Z.ALL)r.addEffectType("all").resetStyle().addDescResult(e,!0);else if(a===Z.RACE)r.addEffectType("race").resetStyle().addDescResult(e,!0);else if(a===Z.CALL)r.addEffectType("call").resetStyle().addCall(c.fn.name,c.args).addDescResult(e);else if(a===Z.CPS)r.addEffectType("cps").resetStyle().addCall(c.fn.name,c.args).addDescResult(e);else if(a===Z.FORK)r.addEffectType(c.detached?"spawn":"fork").resetStyle().addCall(c.fn.name,c.args).addDescResult(e);else if(a===Z.JOIN)r.addEffectType("join").resetStyle().addDescResult(e);else if(a===Z.CANCEL)r.addEffectType("cancel").resetStyle().appendData(c.name);else if(a===Z.SELECT)r.addEffectType("select").resetStyle().addCall(c.selector.name,c.args).addDescResult(e);else if(a===Z.ACTION_CHANNEL)r.addEffectType("actionChannel").resetStyle().addValue(null==c.buffer?c.pattern:c).addDescResult(e);else if(a===Z.CANCELLED)r.addEffectType("cancelled").resetStyle().addDescResult(e);else if(a===Z.FLUSH)r.addEffectType("flush").resetStyle().addValue(c).addDescResult(e);else if(a===Z.GET_CONTEXT)r.addEffectType("getContext").resetStyle().addValue(c).addDescResult(e);else{if(a!==Z.SET_CONTEXT)throw Error("Invalid effect type ".concat(a));r.addEffectType("setContext").resetStyle().addValue(c).addDescResult(e,!0)}}else r.addEffectType("unknown").resetStyle().addDescResult(e);return r}function D(){
return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()}function L(e){var t=D();Object.assign(e,{end:t,duration:t-e.start})}function A(e,t){var n=pe.get(e);J(t)?t.toPromise().then(function(n){t.isCancelled()?j(e):A(e,n)},function(t){return N(e,t)}):(L(n),n.status=z,n.result=t,oe(n.effect)&&I(e,t))}function N(e,t){var n=pe.get(e);L(n),n.status=B,n.error=t,oe(n.effect)&&I(e,t)}function j(e){var t=pe.get(e);L(t),t.status=Q}function I(e,t){var n=Object.keys(t)[0],r=!0,o=!1,a=void 0;try{for(var c,f=pe.getChildIds(e)[Symbol.iterator]();!(r=(c=f.next()).done);r=!0){var l=c.value,i=pe.get(l);i.label===n&&(i.winner=!0)}}catch(e){o=!0,a=e}finally{try{r||null==f.return||f.return()}finally{if(o)throw a}}}function x(){function e(e){s&&(console[l]("%c effectTriggered:",g,e),pe.set(e.effectId,Object.assign({},e,{status:q,start:D()})))}function t(e,t){d&&(console[l]("%c effectResolved:",g,e,t),A(e,t))}function n(e,t){y&&(console[l]("%c effectRejected:",g,e,t),N(e,t))}function r(e){p&&(console[l]("%c effectCancelled:",g,e),j(e))}function o(e){h&&console[l]("%c actionDispatched:",g,e)}var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=c({},he,a),l=f.level,i=f.verbose,u=f.color,s=f.effectTrigger,d=f.effectResolve,y=f.effectReject,p=f.effectCancel,h=f.actionDispatch,g=["color: ".concat(u),"font-weight: bold"].join(";");return i&&console[l]("View Sagas by executing %c $$LogSagas()",g,"in the console"),{effectTriggered:e,effectResolved:t,effectRejected:n,effectCancelled:r,actionDispatched:o}}var k=function(e){return"@@redux-saga/"+e},_=k("CANCEL_PROMISE"),P=k("IO"),V=k("TASK"),M=function(e){return null!==e&&void 0!==e},F=function(e){return"function"==typeof e},K=function(e){return"string"==typeof e},H=Array.isArray,U=function(e){return e&&!H(e)&&"object"==typeof e},X=function(e){return e&&F(e.then)},G=function(e){return e&&F(e.next)&&F(e.throw)},J=function(e){return e&&e[V]},$=function(e){return e&&e[P]
},q="PENDING",z="RESOLVED",B="REJECTED",Q="CANCELLED",W="undefined"!=typeof window&&window.document,Y="CALL",Z=Object.freeze({TAKE:"TAKE",PUT:"PUT",ALL:"ALL",RACE:"RACE",CALL:Y,CPS:"CPS",FORK:"FORK",JOIN:"JOIN",CANCEL:"CANCEL",SELECT:"SELECT",ACTION_CHANNEL:"ACTION_CHANNEL",CANCELLED:"CANCELLED",FLUSH:"FLUSH",GET_CONTEXT:"GET_CONTEXT",SET_CONTEXT:"SET_CONTEXT"}),ee=function(e,t){var n;return n={},n[P]=!0,n.combinator=!1,n.type=e,n.payload=t,n},te=function(e,t){if(v(t,M,e+": argument fn is undefined or null"),!F(t)){var n,r=null;if(H(t))r=t[0],n=t[1],v(n,M,e+": argument of type [context, fn] has undefined or null `fn`");else{if(!U(t))return void v(t,F,e+": argument fn is not function");r=t.context,n=t.fn,v(n,M,e+": argument of type {context, fn} has undefined or null `fn`")}if(r&&K(n))return void v(r[n],F,e+': context arguments has no such method - "'+n+'"');v(n,F,e+": unpacked fn argument (from [context, fn] or {context, fn}) is not a function")}},ne=function(e){return e!==re},re=b.bind(null,g),oe=function(e){return $(e)&&e.type===Z.RACE},ae="",ce="   ",fe="▼",le=function(){function e(){n(this,e),this.logs=[],this.suffix=[]}return o(e,[{key:"add",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!W&&"string"==typeof e){var o=e;e=e.replace(/^%c\s*/,""),e!==o&&n.shift()}return this.logs.push({msg:e,args:n}),this}},{key:"appendData",value:function(){var e;return(e=this.suffix).push.apply(e,arguments),this}},{key:"addValue",value:function(e){return S(e)?this.add(e):W?this.add("%O",e):this.add("%s",require("util").inspect(e)),this}},{key:"addCall",value:function(e,t){var n=this;return t.length?(this.add(e),this.add("("),t.forEach(function(e,r){n.addValue(T(e)),n.addValue(r===t.length-1?")":", ")})):this.add("".concat(e,"()")),this}},{key:"getLog",value:function(){var e=[],t=[],n=!0,r=!1,o=void 0;try{for(var a,c=this.logs[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var f=a.value,l=f.msg,i=f.args;e.push(l),t.push.apply(t,d(i))}}catch(e){r=!0,o=e}finally{try{
n||null==c.return||c.return()}finally{if(r)throw o}}return[e.join("")].concat(t,d(this.suffix))}}]),e}(),ie="color: red",ue="color: #ccc",se=function(e){function t(e,r){var o;return n(this,t),o=s(this,l(t).call(this)),o.logMethod=r?"error":"log",o.styleOverride=function(t){return e?ue:r?ie:t},o}return f(t,e),o(t,[{key:"resetStyle",value:function(){return this.add("%c",this.styleOverride("color: black"))}},{key:"addLabel",value:function(e){return e?this.add("%c ".concat(e," "),this.styleOverride("font-weight: bold")):this}},{key:"addEffectType",value:function(e){return this.add("%c ".concat(e," "),this.styleOverride("color: blue"))}},{key:"addDescResult",value:function(e,t){var n=e.status,r=e.result,o=e.error,a=e.duration;return n!==z||t?n===B?this.appendData("🡲 ⚠",o):n===q?this.appendData("⌛"):n===Q&&this.appendData("🡲 Cancelled!"):H(r)?(this.addValue(" 🡲 "),this.addValue(r)):this.appendData("🡲",r),n!==q&&this.appendData("(".concat(a.toFixed(2),"ms)")),this}}]),t}(le),de=function(){function e(){n(this,e),this.rootIds=[],this.map={},this.childIdsMap={}}return o(e,[{key:"get",value:function(e){return this.map[e]}},{key:"set",value:function(e,t){this.map[e]=t,null==this.childIdsMap[t.parentEffectId]&&(this.childIdsMap[t.parentEffectId]=[]),this.childIdsMap[t.parentEffectId].push(e)}},{key:"setRootEffect",value:function(e,t){this.rootIds.push(e),this.set(e,Object.assign({root:!0},t))}},{key:"getRootIds",value:function(){return this.rootIds}},{key:"getChildIds",value:function(e){return this.childIdsMap[e]||[]}}]),e}(),ye=void 0===window.document&&"ReactNative"===navigator.product?global:W?window:null,pe=new de,he={level:"debug",color:"#03A9F4",rootSagaStart:!1,effectTrigger:!1,effectResolve:!1,effectReject:!1,effectCancel:!1,actionDispatch:!1};ye&&(ye.$$LogSagas=function(){return O(pe)}),e.logSaga=O,e.default=x,Object.defineProperty(e,"__esModule",{value:!0})});